{
  "pipeline_name": "Katalyst Initial",
  "version": 1.0,
  "working_directory": "/opt/Katalyst/repo/",
  "environment_vars": {},
  "check_commit": true,
  "branch": "main",
  "repo_url": "https://github.com/kaidev-vn/haproxy.git",
  "steps": [
    {
      "step_order": 1,
      "step_id": "checkout_code",
      "step_name": "Clone Mã nguồn",
      "step_exec": "REPO_DIR='haproxy'; if [ -d \"$REPO_DIR\" ]; then cd \"$REPO_DIR\" && git pull; else git clone https://github.com/kaidev-vn/haproxy.git; fi",      
      "timeout_seconds": 120,
      "on_fail": "stop"
    },
    {
      "step_order": 2,
      "step_id": "install_dependencies",
      "step_name": "Cài đặt Phụ thuộc (npm)",
      "step_exec": "cd /opt/Katalyst/repo/haproxy && npm i -f",
      "ignore_failure": false,
      "timeout_seconds": 300
    },
    {
      "step_order": 3,
      "step_id": "run build",
      "step_name": "build file",
      "step_exec": "cd /opt/Katalyst/repo/haproxy && npm run build",
      "ignore_failure": false,
      "timeout_seconds": 300
    },
    {
      "step_order": 4,
      "step_id": "runs",
      "step_name": "Runing..",
      "step_exec": "cd /opt/Katalyst/repo/haproxy && pm2 start dist/main.js --name haproxy-nestjs",
      "on_fail": "continue",
      "timeout_seconds": 120
    }
  ]
}